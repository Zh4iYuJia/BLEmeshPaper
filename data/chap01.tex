\chapter{引言}

\section{研究背景}
如今，我们正处于一个万物互联的时代。小至智能手表、智能手机，大至铁路运输网、航空运输图，一切都直接或间接连接到了我们的互联网。

在我们的日常生活中，许多灯泡、开关、温湿度传感器前面也加上了“智能”。有了“智能”化的这些物件，意味着我们可以在手机上控制它们、让它们之间按照一定的规则自动调控，更加便利了我们的生活。

但实际上，我们很难能够实现真正意义上的智能：不同的智能设备多来自于不同的智能厂商，而不同厂商又拥有他们独自的控制软件，彼此不互通，导致根本不能实现自动调控；当用户要操控设备时，也要在众多控制App中选择，显得十分繁琐。

\section{研究内容}
本项目主要实现了一个通用的、高扩展性的基于BLE Mesh的智能家居平台，其分为BLE Mesh节点、网关端、移动端三部分。

本项目的BLE Mesh网络可以只由节点组成，并不强制需要网关的参与。本项目节点中采用的Nordic nRF52832芯片也具有低成本的特点，每个节点还可接入多个传感器、继电器等模块，让更多用户有可能将自己整个家庭升级为真正的智能家庭。具有一定技术能力的用户也可根据未来完全开源的PCB、代码等资源自行构建。

本项目的网关端采用了全插件化的方案，用户只需将需要的插件放至网关端插件目录中，就可以接入其他设备以及其他的控制平台，目前本项目已经开发了HomeKit插件来接入到Apple HomeKit。具有一定技术能力的用户也可根据网关端插件API自制插件，以接入自己原有的智能家居硬件或是自己的智能家居控制软件。

本项目的移动端使用Flutter框架开发，具有多平台界面逻辑的一致性，并使用了Material Design，使得界面简洁明了，软件易用性强。
\section{研究难点}
本项目涉及到的方面很多，既涉及到嵌入式设备，又涉及到网络应用开发及移动应用设计。项目的架构设计、流程设计、技术选型、代码的实现、版本管理等都具有一定挑战性。

本项目的BLE Mesh节点，需要考虑到多功能与低功耗之间的平衡，还需要对代码进行优化，以便在相对低性能的嵌入式芯片上正常地运行程序。

本项目的网关端使用了全插件化的方案，在研究过程中需要处处考虑到不同设备间的兼容问题，并且为了方便具有一定技术能力的用户自行开发新插件，还需确保插件API开放的能力足够。

本项目的移动端虽使用了Flutter框架开发，但iOS/Android平台的差异仍要单独考虑，并且调用各平台独有接口的方式变得更加复杂，有时还需要针对各平台编写对应的插件来解决调用独有接口的问题。
\section{创新点}
本项目的创新点主要有以下几点：
\begin{itemize}
    \item 使用BLE Mesh协议作为节点间通讯的协议，使得节点布置更加方便，不必考虑传统的单对多信号覆盖问题。
    \item 使用低成本的Nordic nRF52832芯片作为BLE Mesh节点，使得用户能够更低成本地使用智能家居。
    \item 具有可选的网关端，使得用户能够更低成本地构建智能家庭系统。
    \item 网关端采用全插件化的方案，使得具有技术能力的用户能够更好、更简单地扩展网关端功能。
    \item 网关端支持Apple HomeKit协议，使得苹果设备用户能用系统原生的“家庭”应用更方便地控制整个智能家庭系统。
    \item 网关端使用高性能的Go语言开发，使得网关端运行更加稳定。
    \item 移动端使用Flutter框架开发，使得在Android/iOS平台中应用体验无太大差异。
\end{itemize}